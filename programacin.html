<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_effects.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>ProgramaciÃ³n | Az-zaiteros Soria FE </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Daniel Bautista Cortijo" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.9 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_effects.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-5"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegaciÃ³n</a></p>
<header id="header" ><div id="headerContent">Az-zaiteros Soria FE</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Future Engineers</a></li>
   <li><a href="diseo_y_estructura.html" class="no-ch">DiseÃ±o y Estructura</a></li>
   <li><a href="mecnica.html" class="no-ch">MecÃ¡nica</a></li>
   <li><a href="electrnica_y_componentes_del_robot.html" class="no-ch">ElectrÃ³nica y componentes del robot</a></li>
   <li id="active"><a href="programacin.html" class="active no-ch">ProgramaciÃ³n</a></li>
   <li><a href="conclusiones.html" class="no-ch">Conclusiones</a></li>
   <li><a href="videos_del_robot_a_lo_largo_del_proceso.html" class="no-ch">Videos del robot a lo largo del proceso</a></li>
   <li><a href="autora.html" class="no-ch">AutorÃ­a</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="electrnica_y_componentes_del_robot.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="conclusiones.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">ProgramaciÃ³n</h1></header>
<article class="iDevice_wrapper textIdevice em_iDevice em_iDevice_udl_exp_competenciadigital" id="id21">
<div class="iDevice emphasis1" >
<header class="iDevice_header" style="background-image:url(icon_udl_exp_competenciadigital.svg)"><h1 class="iDeviceTitle">Diagramas de flujo</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta21_120_2" class="block iDevice_content">
<div class="exe-text"><p>Cuando ya terminamos de terminar el montaje empezamos la programaciÃ³n. Dado que ya habÃ­amos trabajado en clase diversas veces con arduino en clase, ya sabÃ­amos controlar la mayorÃ­a de componentes individualmente pero el problema llegaba a la hora de integrar todos al mismo tiempo. Al final, despuÃ©s de algunas clases, vimos que no era tan complicado y era solo hacerlo todo bien organizado, y aquÃ­ viene una explicaciÃ³n del programa:</p>
<p></p>
<p>Y aquÃ­ los diagramas de flujo:</p>
<div class="exe-fx exe-paginated">
<h2>DIAGRAMA DE FLUJO PRINCIPAL</h2>
<figure class="exe-figure exe-image position-center license-CC-BY-NC-ND" style="width: 650px;"><img src="progrma.jpg" alt="" width="650" height="927" />
<figcaption class="figcaption"><span class="author">Daniel Bautista Cortijo</span>. <span class="title"><em>Flujo principal</em></span> <span class="license"><span class="sep">(</span><a href="http://creativecommons.org/licenses/?lang=es" rel="license nofollow noopener" target="_blank" title="Creative Commons BY-NC-ND">CC BY-NC-ND</a><span class="sep">)</span></span></figcaption>
</figure>
<p><br /><br /></p>
<h2>DIAGRAMA DE FLUJO ATRAS</h2>
<figure class="exe-figure exe-image position-center license-CC-BY-SA" style="width: 650px;"><img src="sub.jpg" alt="" width="650" height="692" />
<figcaption class="figcaption"><span class="author">Daniel Bautista Cortijo</span>. <span class="title"><em>DIAGRAMA DE FLUJO ATRAS</em></span> <span class="license"><span class="sep">(</span><a href="http://creativecommons.org/licenses/?lang=es" rel="license nofollow noopener" target="_blank" title="Creative Commons BY-SA">CC BY-SA</a><span class="sep">)</span></span></figcaption>
</figure>
<h2>DIAGRAMA DE FLUJO RECTO</h2>
<figure class="exe-figure exe-image position-center license-CC-BY-NC-ND" style="width: 600px;"><img src="sub3.1.jpg" alt="" width="600" height="651" />
<figcaption class="figcaption"><span class="author">Daniel Bautista Cortijo</span>. <span class="title"><em>DIAGRAMA DE FLUJO RECTO</em></span> <span class="license"><span class="sep">(</span><a href="http://creativecommons.org/licenses/?lang=es" rel="license nofollow noopener" target="_blank" title="Creative Commons BY-NC-ND">CC BY-NC-ND</a><span class="sep">)</span></span></figcaption>
</figure>
<p><br /><br /></p>
<p></p>
<h2>DAGRAMA DE FLUJO IZQUIERDA</h2>
<figure class="exe-figure exe-image position-center license-CC-BY-NC-ND" style="width: 650px;"><img src="sub2.jpg" alt="" width="650" height="662" />
<figcaption class="figcaption"><span class="author">Daniel Bautista Cortijo</span>. <span class="title"><em>Diagrama de flujo izquierda</em></span> <span class="license"><span class="sep">(</span><a href="http://creativecommons.org/licenses/?lang=es" rel="license nofollow noopener" target="_blank" title="Creative Commons BY-NC-ND">CC BY-NC-ND</a><span class="sep">)</span></span></figcaption>
</figure>
<h2>Derecha</h2>
<figure class="exe-figure exe-image position-center license-CC-BY" style="width: 600px;"><img src="_Diagrama_de_flujo_(1).png" alt="" width="600" height="671" />
<figcaption class="figcaption"><span class="author">Daniel Bautista Cortijo</span>. <span class="title"><em>Diagrama flujo derecha</em></span> <span class="license"><span class="sep">(</span><a href="http://creativecommons.org/licenses/?lang=es" rel="license nofollow noopener" target="_blank" title="Creative Commons BY">CC BY</a><span class="sep">)</span></span></figcaption>
</figure>
<p><br /><br /></p>
</div>
<p></p></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper textIdevice em_iDevice" id="id22">
<div class="iDevice emphasis1" >
<header class="iDevice_header iDevice_header_noIcon"><h1 class="iDeviceTitle">ğŸ§  Objetivo del programa</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta22_121_2" class="block iDevice_content">
<div class="exe-text"><p>Este programa sirve para que un robot avance recto mientras verifica constantemente con sensores ultrasÃ³nicos si hay obstÃ¡culos delante.<br />Cuando detecta un obstÃ¡culo a menos de 42 cm de distancia, decide girar a la izquierda o derecha, dependiendo de cuÃ¡l lado estÃ© mÃ¡s libre.<br />AsÃ­, el robot da vueltas por el tablero evitando chocarse con paredes u objetos.</p></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper textIdevice em_iDevice" id="id24">
<div class="iDevice emphasis1" >
<header class="iDevice_header iDevice_header_noIcon"><h1 class="iDeviceTitle">ğŸ§¾ Bibliotecas utilizadas</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta24_123_2" class="block iDevice_content">
<div class="exe-text"><p>#include &lt;Servo.h&gt;</p>
<p>#include &lt;Ultrasonic.h&gt;</p>
<p>#include &lt;L298N.h&gt;</p>
<p>Servo.h: para controlar un servo motor, que gira las ruedas como si fuera el volante del robot.</p>
<p><br />Ultrasonic.h: para manejar los sensores ultrasÃ³nicos, que miden la distancia a los objetos usando ondas de sonido que rebotan con las paredes y vuelven al sensor y gracias a esto calcula la distancia del objeto al sensor gracias a una fÃ³rmula matemÃ¡tica.</p>
<p><br />L298N.h: se usa para controlar motores con el driver L298N.</p></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper textIdevice em_iDevice" id="id25">
<div class="iDevice emphasis1" >
<header class="iDevice_header iDevice_header_noIcon"><h1 class="iDeviceTitle">ğŸ“¦ Variables y pines</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta25_124_2" class="block iDevice_content">
<div class="exe-text"><p>// Pines para los sensores ultrasÃ³nicos</p>
<p>#define TRIG_IZQ 8</p>
<p>#define ECHO_IZQ 9</p>
<p>Ultrasonic ultraIZQ(TRIG_IZQ, ECHO_IZQ,60000);</p>
<p><br />#define TRIG_CEN 6</p>
<p>#define ECHO_CEN 7</p>
<p>Ultrasonic ultraCEN(TRIG_CEN, ECHO_CEN,60000);</p>
<p><br />#define TRIG_DER 11</p>
<p>#define ECHO_DER 10</p>
<p>Ultrasonic ultraDER(TRIG_DER, ECHO_DER,60000);</p>
<p><br />Cada sensor estÃ¡ conectado a un par de pines TRIG/ECHO, y se usa la librerÃ­a Ultrasonic para medir distancias. El nÃºmero 60000 es un valor mÃ¡ximo de espera en microsegundos.</p>
<p><br />// Pines para driver L298N</p>
<p>int in2 = 4;</p>
<p>int in1 = 5;</p>
<p>int ena = 3;</p>
<p>Estos son los pines de control para el motor conectados al driver L298N:</p>
<p>in1 y in2 determinan la direcciÃ³n del motor (adelante o atrÃ¡s).<br />ena controla la velocidad con PWM.<br />int pinservo = 13;</p>
<p>Servo servo;</p>
<p>float centro=87.7;</p>
<p>El servomotor se conecta al pin 13 y centro es el Ã¡ngulo que corresponde a las ruedas rectas que depende de la calibraciÃ³n del servo.</p>
<p>int MCentro; Â  Â  //mediciÃ³n de ultrasonido del centro</p>
<p>int Mizq; Â  Â  //mediciÃ³n de ultrasonido del centro</p>
<p>int Mdcha; Â  Â  //mediciÃ³n de ultrasonido del centro</p>
<p>MCentro, Mizq, Mdcha: almacenan las distancias detectadas por cada sensor.</p></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper textIdevice em_iDevice" id="id26">
<div class="iDevice emphasis1" >
<header class="iDevice_header iDevice_header_noIcon"><h1 class="iDeviceTitle">ğŸ”„ setup()</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta26_125_2" class="block iDevice_content">
<div class="exe-text"><p>void setup() {</p>
<p>Â Â pinMode(in2, OUTPUT);</p>
<p>Â Â pinMode(in1, OUTPUT);</p>
<p>Â Â pinMode(ena, OUTPUT);</p>
<p>Â Â servo.attach(pinservo);</p>
<p>Â Â servo.write(centro);Â </p>
<p>Â Â Serial.begin(9600);</p>
<p>}</p>
<p>Esta funciÃ³n se ejecuta una sola vez al iniciar el programa.</p>
<p>Configura los pines del motor como salidas para mandar la informaciÃ³n hacia el motor para que la ejecute.</p>
<p>Conecta el servo al pin 13 y lo centra gracias a la variable â€œcentroâ€.</p>
<p>Activa el puerto serie a unos 9600 watios .</p></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper textIdevice em_iDevice" id="id27">
<div class="iDevice emphasis1" >
<header class="iDevice_header iDevice_header_noIcon"><h1 class="iDeviceTitle">â™¾ï¸loop()</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta27_126_2" class="block iDevice_content">
<div class="exe-text"><p>MCentro=ultraCEN.Ranging(CM);</p>
<p>Mizq=ultraIZQ.Ranging(CM);</p>
<p>Mdcha=ultraDER.Ranging(CM);</p>
<p>Se almacenan en variables ya creadas previamente para la mediciÃ³n de la distancia de los ultrasonidos, usando comandos de la libreria de Ultrasonic.</p>
<p></p>
<p><br />Â if(MCentro &lt;= 42){</p>
<p>Â Â Â </p>
<p>Â Â Â Â if (Mizq&gt;Mdcha){</p>
<p>Â Â Â Â Â Â izquierda(670) ;</p>
<p>Â Â Â Â Â Â Serial.println("izquierda");</p>
<p>Â Â Â Â }</p>
<p>Â Â Â Â if (Mizq&lt;Mdcha){</p>
<p>Â Â Â Â Â Â derecha(660);</p>
<p>Â Â Â Â Â Â Serial.println("derecha");</p>
<p>Â Â Â Â }Â </p>
<p>Â Â }</p>
<p>Â if(MCentro &lt; 42){</p>
<p>Â Â Â recto(50);</p>
<p>}</p>
<p>Aqui se utiliza un condicional para decir que si la distancia es menor o igual de 42, use otro condicional y sino, que siga recto gracias a otra condicional.</p>
<p>Si la distancia es inferior a 42 centimetros, empezaria otro condicional que su funciÃ³n seria comparar las distancias de izquierda y derecha y el que sea ayor de los dos es para el lado al que se gira gracias a un subprograma llamado izquierda, o derecha</p></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper textIdevice em_iDevice" id="id28">
<div class="iDevice emphasis1" >
<header class="iDevice_header iDevice_header_noIcon"><h1 class="iDeviceTitle">â†ªï¸Subprogramas</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta28_127_2" class="block iDevice_content">
<div class="exe-text"><p>Los subprogramas son fragmentos de cÃ³digo que realizan tareas especÃ­ficas y suelen ser reutilizados en diferentes partes de un programa.</p>
<p><br />void recto(int tiempo){</p>
<p>Â Â servo.write(centro);</p>
<p>Â Â digitalWrite(in2, HIGH);</p>
<p>Â Â digitalWrite(in1, LOW);</p>
<p>Â Â analogWrite(ena, 200);</p>
<p>Â Â delay(tiempo);</p>
<p>}</p>
<p>Este subprograma es el que hace que los motores se muevan rectos hacia delante mientras que el servo estÃ¡ parado justo mirando hacia el frente gracias a la librerÃ­a L289N.</p>
<p></p>
<p><br />void izquierda(int tiempo){</p>
<p>Â Â servo.write(45);</p>
<p>Â Â digitalWrite(in2, HIGH);</p>
<p>Â Â digitalWrite(in1, LOW);</p>
<p>Â Â analogWrite(ena, 200);</p>
<p>Â Â delay(tiempo);</p>
<p>Â Â servo.write(centro);</p>
<p>}</p>
<p></p>
<p></p>
<p></p>
<p>void derecha(int tiempo){</p>
<p>Â Â servo.write(135);</p>
<p>Â Â digitalWrite(in2, HIGH);</p>
<p>Â Â digitalWrite(in1, LOW);</p>
<p>Â Â analogWrite(ena, 200);</p>
<p>Â Â delay(tiempo);</p>
<p>Â Â servo.write(centro);</p>
<p>}</p>
<p></p>
<p></p>
<p></p>
<p>void atras(int tiempo){</p>
<p>Â Â servo.write(centro);</p>
<p>Â Â digitalWrite(in2, LOW);</p>
<p>Â Â digitalWrite(in1, HIGH);</p>
<p>Â Â analogWrite(ena, 100);</p>
<p>}</p>
<p></p>
<p></p>
<p></p>
<p>void stop(int tiempo){</p>
<p>Â Â servo.write(centro);</p>
<p>Â Â digitalWrite(in2, LOW);</p>
<p>Â Â digitalWrite(in1, LOW);</p>
<p>Â Â analogWrite(ena, 0);</p>
<p>}</p>
<p>Estos subprogramas funcional igual que el primero pero se le cambian algunos parÃ¡metros para que en vez de que vaya hacia delante, pueda ir hacia atrÃ¡s, derecha, izquierda o que estÃ© parado.</p>
<p></p></div>
</div>
</div>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Licencia Creative Commons Reconocimiento Compartir igual 4.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="electrnica_y_componentes_del_robot.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="conclusiones.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<p id="made-with-eXe"><a href="https://exelearning.net/" target="_blank" rel="noopener"><span>Creado con eXeLearning<span> (Ventana nueva)</span></span></a></p><script type="text/javascript" src="_style_js.js"></script></body></html>